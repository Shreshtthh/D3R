"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/_app",{

/***/ "(pages-dir-browser)/./utils/web3.js":
/*!***********************!*\
  !*** ./utils/web3.js ***!
  \***********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DISASTER_TYPES: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES),\n/* harmony export */   URGENCY_LEVELS: () => (/* reexport safe */ _constants__WEBPACK_IMPORTED_MODULE_8__.URGENCY_LEVELS),\n/* harmony export */   checkPreviousConnection: () => (/* binding */ checkPreviousConnection),\n/* harmony export */   checkWeb3Connection: () => (/* binding */ checkWeb3Connection),\n/* harmony export */   connectWallet: () => (/* binding */ connectWallet),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   donate: () => (/* binding */ donate),\n/* harmony export */   getContractAddresses: () => (/* binding */ getContractAddresses),\n/* harmony export */   getCurrentAccount: () => (/* binding */ getCurrentAccount),\n/* harmony export */   getDashboardStats: () => (/* binding */ getDashboardStats),\n/* harmony export */   getMilestones: () => (/* binding */ getMilestones),\n/* harmony export */   getNGODetails: () => (/* binding */ getNGODetails),\n/* harmony export */   getReliefCampaign: () => (/* binding */ getReliefCampaign),\n/* harmony export */   getReliefCampaigns: () => (/* binding */ getReliefCampaigns),\n/* harmony export */   getVerificationStatus: () => (/* binding */ getVerificationStatus),\n/* harmony export */   initWeb3: () => (/* binding */ initWeb3),\n/* harmony export */   isNGOVerified: () => (/* binding */ isNGOVerified),\n/* harmony export */   verifyIPFSDocument: () => (/* binding */ verifyIPFSDocument)\n/* harmony export */ });\n/* harmony import */ var web3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! web3 */ \"(pages-dir-browser)/./node_modules/web3/lib/esm/index.js\");\n/* harmony import */ var _contracts_D3RProtocol_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../contracts/D3RProtocol.json */ \"(pages-dir-browser)/./contracts/D3RProtocol.json\");\n/* harmony import */ var _contracts_MilestoneFunding_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../contracts/MilestoneFunding.json */ \"(pages-dir-browser)/./contracts/MilestoneFunding.json\");\n/* harmony import */ var _contracts_NGORegistry_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../contracts/NGORegistry.json */ \"(pages-dir-browser)/./contracts/NGORegistry.json\");\n/* harmony import */ var _contracts_ChainlinkDisasterOracle_json__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../contracts/ChainlinkDisasterOracle.json */ \"(pages-dir-browser)/./contracts/ChainlinkDisasterOracle.json\");\n/* harmony import */ var _contracts_IPFSVerifier_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../contracts/IPFSVerifier.json */ \"(pages-dir-browser)/./contracts/IPFSVerifier.json\");\n/* harmony import */ var _contracts_FundPool_json__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../contracts/FundPool.json */ \"(pages-dir-browser)/./contracts/FundPool.json\");\n/* harmony import */ var _contracts_DonationTracker_json__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../contracts/DonationTracker.json */ \"(pages-dir-browser)/./contracts/DonationTracker.json\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./constants */ \"(pages-dir-browser)/./utils/constants.js\");\n/* harmony import */ var _demoData__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./demoData */ \"(pages-dir-browser)/./utils/demoData.js\");\n\n\n\n\n\n\n\n\n// Import constants\n\n// Import demo data without creating circular dependency\n\nlet web3;\nlet d3rProtocol;\nlet milestoneFunding;\nlet ngoRegistry;\nlet disasterOracle;\nlet ipfsVerifier;\nlet fundPool;\nlet donationTracker;\n// Re-export constants for convenience\n\n// Contract addresses - use from constants\nconst D3R_PROTOCOL_ADDRESS = _constants__WEBPACK_IMPORTED_MODULE_8__.CONTRACT_ADDRESSES.D3R_PROTOCOL;\nconst MILESTONE_FUNDING_ADDRESS = _constants__WEBPACK_IMPORTED_MODULE_8__.CONTRACT_ADDRESSES.MILESTONE_FUNDING;\nconst NGO_REGISTRY_ADDRESS = _constants__WEBPACK_IMPORTED_MODULE_8__.CONTRACT_ADDRESSES.NGO_REGISTRY;\nconst DISASTER_ORACLE_ADDRESS = _constants__WEBPACK_IMPORTED_MODULE_8__.CONTRACT_ADDRESSES.DISASTER_ORACLE;\nconst IPFS_VERIFIER_ADDRESS = _constants__WEBPACK_IMPORTED_MODULE_8__.CONTRACT_ADDRESSES.IPFS_VERIFIER;\nconst FUND_POOL_ADDRESS = _constants__WEBPACK_IMPORTED_MODULE_8__.CONTRACT_ADDRESSES.FUND_POOL;\nconst DONATION_TRACKER_ADDRESS = _constants__WEBPACK_IMPORTED_MODULE_8__.CONTRACT_ADDRESSES.DONATION_TRACKER;\n// Initialize Web3 and contract instances\nconst initWeb3 = async function() {\n    let forceConnect = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;\n    try {\n        let accounts = [];\n        // Check if we're in a browser and if ethereum is injected\n        if ( true && window.ethereum) {\n            console.log(\"Found window.ethereum, attempting to connect\");\n            try {\n                // Request account access if needed or if force connect is true\n                if (forceConnect) {\n                    accounts = await window.ethereum.request({\n                        method: 'eth_requestAccounts'\n                    });\n                    console.log(\"Forced connect accounts:\", accounts);\n                } else {\n                    // Just get accounts without prompting\n                    accounts = await window.ethereum.request({\n                        method: 'eth_accounts'\n                    });\n                    console.log(\"Current accounts:\", accounts);\n                }\n                // Create Web3 instance\n                web3 = new web3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](window.ethereum);\n                // Set up event listeners for account/network changes if they don't exist\n                if (!window.ethereum._events || !window.ethereum._events.accountsChanged) {\n                    window.ethereum.on('accountsChanged', (newAccounts)=>{\n                        console.log('accountsChanged', newAccounts);\n                        // Dispatch a custom event that components can listen for\n                        window.dispatchEvent(new CustomEvent('walletAccountChanged', {\n                            detail: newAccounts\n                        }));\n                    });\n                    window.ethereum.on('chainChanged', (chainId)=>{\n                        console.log('chainChanged', chainId);\n                        window.dispatchEvent(new CustomEvent('walletChainChanged', {\n                            detail: chainId\n                        }));\n                    });\n                    window.ethereum.on('disconnect', (error)=>{\n                        console.log('disconnect', error);\n                        window.dispatchEvent(new CustomEvent('walletDisconnected'));\n                    });\n                }\n            } catch (error) {\n                console.error(\"Error requesting account access:\", error);\n            }\n        } else if ( true && window.web3) {\n            // Legacy support for older MetaMask/Web3 implementations\n            console.log(\"Found legacy web3\");\n            web3 = new web3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](window.web3.currentProvider);\n            accounts = await web3.eth.getAccounts();\n        } else {\n            console.log(\"No Web3 wallet detected, using read-only provider\");\n            // Set up a read-only provider for non-wallet users\n            const provider = new web3__WEBPACK_IMPORTED_MODULE_0__[\"default\"].providers.HttpProvider(\"https://eth-sepolia.g.alchemy.com/v2/demo\");\n            web3 = new web3__WEBPACK_IMPORTED_MODULE_0__[\"default\"](provider);\n        }\n        // Initialize contract instances only if web3 is setup\n        if (web3) {\n            try {\n                d3rProtocol = new web3.eth.Contract(_contracts_D3RProtocol_json__WEBPACK_IMPORTED_MODULE_1__.abi, D3R_PROTOCOL_ADDRESS);\n                milestoneFunding = new web3.eth.Contract(_contracts_MilestoneFunding_json__WEBPACK_IMPORTED_MODULE_2__.abi, MILESTONE_FUNDING_ADDRESS);\n                ngoRegistry = new web3.eth.Contract(_contracts_NGORegistry_json__WEBPACK_IMPORTED_MODULE_3__.abi, NGO_REGISTRY_ADDRESS);\n                disasterOracle = new web3.eth.Contract(_contracts_ChainlinkDisasterOracle_json__WEBPACK_IMPORTED_MODULE_4__.abi, DISASTER_ORACLE_ADDRESS);\n                ipfsVerifier = new web3.eth.Contract(_contracts_IPFSVerifier_json__WEBPACK_IMPORTED_MODULE_5__.abi, IPFS_VERIFIER_ADDRESS);\n                fundPool = new web3.eth.Contract(_contracts_FundPool_json__WEBPACK_IMPORTED_MODULE_6__.abi, FUND_POOL_ADDRESS);\n                donationTracker = new web3.eth.Contract(_contracts_DonationTracker_json__WEBPACK_IMPORTED_MODULE_7__.abi, DONATION_TRACKER_ADDRESS);\n                window.web3 = web3; // Make web3 available globally for utility functions\n            } catch (contractError) {\n                console.error(\"Error initializing contracts:\", contractError);\n            }\n        }\n        return {\n            web3,\n            accounts,\n            connected: accounts.length > 0\n        };\n    } catch (error) {\n        console.error(\"Error initializing web3:\", error);\n        return {\n            web3: null,\n            accounts: [],\n            connected: false\n        };\n    }\n};\n// Check connection status\nconst checkWeb3Connection = async ()=>{\n    try {\n        const { web3, accounts } = await initWeb3();\n        if (!web3) {\n            return 'Web3 not available';\n        }\n        if (!accounts || accounts.length === 0) {\n            return 'Not connected to wallet';\n        }\n        const networkId = await web3.eth.net.getId();\n        const networkType = await web3.eth.net.getNetworkType();\n        return \"Connected to \".concat(accounts[0], \" on \").concat(networkType, \" (\").concat(networkId, \")\");\n    } catch (error) {\n        console.error(\"Connection check failed:\", error);\n        return \"Connection error: \".concat(error.message);\n    }\n};\n// Connect wallet explicitly (for connect button)\nconst connectWallet = async ()=>{\n    if ( true && window.ethereum) {\n        try {\n            // Force request account access with UI prompt\n            const result = await initWeb3(true);\n            if (!result.connected) {\n                return {\n                    success: false,\n                    error: \"User denied account access\"\n                };\n            }\n            // Check if we're on the right network\n            const networkId = await web3.eth.net.getId();\n            const networkType = await web3.eth.net.getNetworkType();\n            const expectedNetwork = \"1\" || 0;\n            const networkName = \"Ethereum Sepolia Testnet\" || 0;\n            if (networkId.toString() !== expectedNetwork) {\n                // Prompt user to switch networks\n                try {\n                    await window.ethereum.request({\n                        method: 'wallet_switchEthereumChain',\n                        params: [\n                            {\n                                chainId: \"0x\".concat(parseInt(expectedNetwork).toString(16))\n                            }\n                        ]\n                    });\n                } catch (switchError) {\n                    console.error(\"Failed to switch networks:\", switchError);\n                    return {\n                        success: false,\n                        error: \"Please switch to \".concat(networkName, \" in your wallet\")\n                    };\n                }\n            }\n            // Save connected status to localStorage\n            try {\n                localStorage.setItem('walletConnected', 'true');\n            } catch (e) {\n                console.warn('Failed to save connection state to localStorage:', e);\n            }\n            return {\n                success: true,\n                address: result.accounts[0],\n                networkId,\n                networkType\n            };\n        } catch (error) {\n            console.error(\"Failed to connect wallet:\", error);\n            return {\n                success: false,\n                error: error.message || \"Failed to connect wallet\"\n            };\n        }\n    } else {\n        return {\n            success: false,\n            error: \"No Ethereum wallet detected. Please install MetaMask.\"\n        };\n    }\n};\n// Get all active relief campaigns with verification status\nconst getReliefCampaigns = async function() {\n    let filters = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};\n    try {\n        // Check if we're in demo mode\n        if (true) {\n            const isDemoMode = localStorage.getItem('demoMode') === 'true';\n            if (isDemoMode) {\n                console.log(\"Using demo campaign data\");\n                return _demoData__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getDemoCampaigns(filters);\n            }\n        }\n        await initWeb3();\n        // Get project count\n        const projectCount = await milestoneFunding.methods.projectCount().call();\n        const campaigns = [];\n        // Load all projects\n        for(let i = 0; i < projectCount; i++){\n            try {\n                const projectDetails = await milestoneFunding.methods.getProjectDetails(i).call();\n                // Only include active projects\n                if (projectDetails.isActive) {\n                    var _metadata_location;\n                    // Try to get metadata about the disaster (could be stored in IPFS or as events)\n                    let metadata = {};\n                    try {\n                        // In a production environment, we would fetch metadata from IPFS or blockchain events\n                        // For now, we'll use placeholder data\n                        const disasterType = getRandomDisasterType(i);\n                        const disasterId = \"DS-\".concat(2023, \"-\").concat(1000 + i);\n                        metadata = {\n                            disasterType: disasterType,\n                            location: getLocationForDisasterType(disasterType),\n                            disasterId: disasterId,\n                            urgencyLevel: getUrgencyForDisasterType(disasterType)\n                        };\n                        // Try to get verification from the Oracle contract\n                        try {\n                            const verification = await disasterOracle.methods.getDisasterVerification(disasterId).call();\n                            metadata.verified = verification.verified;\n                            metadata.confidence = verification.confidence;\n                            metadata.source = verification.source || \"Chainlink Oracles\";\n                        } catch (verificationError) {\n                            console.log(\"Could not get verification for disaster \".concat(disasterId), verificationError);\n                            metadata.verified = i % 3 === 0; // For testing: make every third project verified\n                            metadata.confidence = metadata.verified ? 85 : 0;\n                            metadata.source = metadata.verified ? \"Chainlink Weather Data\" : \"\";\n                        }\n                    } catch (metadataError) {\n                        console.error(\"Error fetching metadata for project \".concat(i, \":\"), metadataError);\n                    }\n                    // Apply filters if provided\n                    if (filters.disasterType && metadata.disasterType !== filters.disasterType || filters.location && !((_metadata_location = metadata.location) === null || _metadata_location === void 0 ? void 0 : _metadata_location.toLowerCase().includes(filters.location.toLowerCase())) || filters.urgency > 0 && metadata.urgencyLevel !== parseInt(filters.urgency)) {\n                        continue; // Skip this campaign if it doesn't match filters\n                    }\n                    // Get milestone information\n                    const milestones = [];\n                    for(let j = 0; j < projectDetails.milestoneCount; j++){\n                        try {\n                            const milestone = await milestoneFunding.methods.getMilestoneDetails(i, j).call();\n                            milestones.push({\n                                ...milestone,\n                                id: j\n                            });\n                        } catch (milestoneError) {\n                            console.error(\"Error fetching milestone \".concat(j, \" for project \").concat(i, \":\"), milestoneError);\n                        }\n                    }\n                    // Get NGO details\n                    let ngoDetails = {\n                        name: \"Unknown NGO\"\n                    };\n                    try {\n                        ngoDetails = await ngoRegistry.methods.getNGODetails(projectDetails.ngoAddress).call();\n                    } catch (ngoError) {\n                        console.error(\"Error fetching NGO details for address \".concat(projectDetails.ngoAddress, \":\"), ngoError);\n                    }\n                    // Add campaign to the list\n                    campaigns.push({\n                        id: i,\n                        title: projectDetails.name,\n                        description: projectDetails.description,\n                        creator: projectDetails.ngoAddress,\n                        ngoName: ngoDetails.name || \"Unknown NGO\",\n                        currentAmount: projectDetails.releasedFunding,\n                        targetAmount: projectDetails.totalFunding,\n                        milestonesCompleted: parseInt(projectDetails.milestonesCompleted),\n                        milestoneCount: parseInt(projectDetails.milestoneCount),\n                        milestones: milestones,\n                        isActive: projectDetails.isActive,\n                        deadline: calculateDeadline(i),\n                        parsedMetadata: metadata\n                    });\n                }\n            } catch (projectError) {\n                console.error(\"Error loading project \".concat(i, \":\"), projectError);\n            }\n        }\n        return campaigns;\n    } catch (error) {\n        console.error(\"Error getting relief campaigns:\", error);\n        // Return demo data as fallback in case of error\n        return _demoData__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getDemoCampaigns(filters);\n    }\n};\n// Get a specific campaign by ID\nconst getReliefCampaign = async (id)=>{\n    // Check if we're in demo mode\n    if (true) {\n        const isDemoMode = localStorage.getItem('demoMode') === 'true';\n        if (isDemoMode) {\n            console.log(\"Using demo campaign data for ID:\", id);\n            return _demoData__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getDemoCampaign(id);\n        }\n    }\n    try {\n        const campaigns = await getReliefCampaigns();\n        return campaigns.find((c)=>c.id.toString() === (id === null || id === void 0 ? void 0 : id.toString()));\n    } catch (error) {\n        console.error(\"Error getting campaign with ID \".concat(id, \":\"), error);\n        return _demoData__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getDemoCampaign(id);\n    }\n};\n// Get milestones for a campaign\nconst getMilestones = async (campaignId)=>{\n    // Check if we're in demo mode\n    if (true) {\n        const isDemoMode = localStorage.getItem('demoMode') === 'true';\n        if (isDemoMode) {\n            console.log(\"Using demo milestone data\");\n            return _demoData__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getDemoMilestones(campaignId);\n        }\n    }\n    try {\n        const campaign = await getReliefCampaign(campaignId);\n        return (campaign === null || campaign === void 0 ? void 0 : campaign.milestones) || [];\n    } catch (error) {\n        console.error(\"Error getting milestones for campaign \".concat(campaignId, \":\"), error);\n        return _demoData__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getDemoMilestones(campaignId);\n    }\n};\n// Donate to a relief campaign\nconst donate = async (campaignId, amount)=>{\n    try {\n        const { web3, accounts } = await initWeb3();\n        if (!accounts || accounts.length === 0) {\n            throw new Error(\"No connected wallet accounts\");\n        }\n        const amountWei = web3.utils.toWei(amount.toString(), 'ether');\n        // Get the project details to check if it's active\n        const projectDetails = await milestoneFunding.methods.getProjectDetails(campaignId).call();\n        if (!projectDetails.isActive) {\n            throw new Error(\"This relief project is no longer active\");\n        }\n        // There's no direct donation method in MilestoneFunding in the contract code\n        // We'll use D3RProtocol to handle the donation\n        try {\n            // Try to donate via the main protocol contract\n            await d3rProtocol.methods.donateToProject(campaignId).send({\n                from: accounts[0],\n                value: amountWei\n            });\n        } catch (protocolError) {\n            console.error(\"D3RProtocol donation failed, trying direct transaction:\", protocolError);\n            // If the protocol doesn't have a donateToProject method, try a direct transaction\n            await web3.eth.sendTransaction({\n                from: accounts[0],\n                to: MILESTONE_FUNDING_ADDRESS,\n                value: amountWei,\n                data: web3.eth.abi.encodeFunctionCall({\n                    name: 'addFundsToProject',\n                    type: 'function',\n                    inputs: [\n                        {\n                            type: 'uint256',\n                            name: 'projectId'\n                        }\n                    ]\n                }, [\n                    campaignId\n                ])\n            });\n        }\n        return true;\n    } catch (error) {\n        console.error(\"Error donating to campaign:\", error);\n        throw error;\n    }\n};\n// Get verification status of a relief campaign\nconst getVerificationStatus = async (disasterId)=>{\n    // Check if we're in demo mode\n    if (true) {\n        const isDemoMode = localStorage.getItem('demoMode') === 'true';\n        if (isDemoMode) {\n            console.log(\"Using demo verification data\");\n            return _demoData__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getDemoVerification(disasterId);\n        }\n    }\n    try {\n        await initWeb3();\n        const verification = await disasterOracle.methods.getDisasterVerification(disasterId).call();\n        return verification;\n    } catch (error) {\n        console.error(\"Error getting verification status:\", error);\n        return _demoData__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getDemoVerification(disasterId);\n    }\n};\n// Get NGO details\nconst getNGODetails = async (ngoAddress)=>{\n    // Check if we're in demo mode\n    if (true) {\n        const isDemoMode = localStorage.getItem('demoMode') === 'true';\n        if (isDemoMode) {\n            console.log(\"Using demo NGO data\");\n            return _demoData__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getDemoNGO(ngoAddress);\n        }\n    }\n    try {\n        await initWeb3();\n        const ngoDetails = await ngoRegistry.methods.getNGODetails(ngoAddress).call();\n        return ngoDetails;\n    } catch (error) {\n        console.error(\"Error getting NGO details:\", error);\n        return _demoData__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getDemoNGO(ngoAddress);\n    }\n};\n// Get dashboard stats\nconst getDashboardStats = async ()=>{\n    try {\n        // Check if we're in demo mode\n        if (true) {\n            // This is a client-side check for demo mode\n            const isDemoMode = localStorage.getItem('demoMode') === 'true';\n            if (isDemoMode) {\n                console.log(\"Using demo stats data\");\n                return _demoData__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getDemoStats();\n            }\n        }\n        const { web3 } = await initWeb3();\n        // Get NGO count\n        let verifiedNGOsCount = 0;\n        try {\n            verifiedNGOsCount = await ngoRegistry.methods.getVerifiedNGOsCount().call();\n        } catch (ngoError) {\n            console.error(\"Error getting verified NGO count:\", ngoError);\n        }\n        // Get project count and calculate total funding and people helped\n        let projectCount = 0;\n        try {\n            projectCount = await milestoneFunding.methods.projectCount().call();\n        } catch (projectError) {\n            console.error(\"Error getting project count:\", projectError);\n        }\n        // Safely create a BigNumber (if web3.utils.toBN isn't available, use standard string handling)\n        let totalDonations = \"0\";\n        let totalDonationsBN;\n        try {\n            // Check if web3.utils has the toBN function\n            if (web3 && web3.utils && typeof web3.utils.toBN === 'function') {\n                totalDonationsBN = web3.utils.toBN(\"0\");\n            } else {\n                // Fallback to string-based handling\n                totalDonations = \"0\";\n            }\n        } catch (error) {\n            console.error(\"Error with BigNumber handling:\", error);\n            totalDonations = \"0\";\n        }\n        let activeCampaigns = 0;\n        let totalPeopleHelped = 0;\n        for(let i = 0; i < projectCount; i++){\n            try {\n                const projectDetails = await milestoneFunding.methods.getProjectDetails(i).call();\n                // Handle the total donations amount safely\n                try {\n                    if (totalDonationsBN) {\n                        // Use BN addition if available\n                        totalDonationsBN = totalDonationsBN.add(web3.utils.toBN(projectDetails.totalFunding));\n                    } else {\n                        // Fallback to simple string/number handling\n                        const fundingInEther = web3 && web3.utils ? web3.utils.fromWei(projectDetails.totalFunding, 'ether') : parseFloat(projectDetails.totalFunding) / 1e18;\n                        totalDonations = (parseFloat(totalDonations) + parseFloat(fundingInEther)).toString();\n                    }\n                } catch (bnError) {\n                    console.error(\"Error adding to donation total:\", bnError);\n                    // Fallback to simple addition\n                    totalDonations = (parseFloat(totalDonations) + parseFloat(projectDetails.totalFunding) / 1e18).toFixed(4);\n                }\n                if (projectDetails.isActive) {\n                    activeCampaigns++;\n                    // In a real scenario, you'd have a way to track people helped per project\n                    // For now, use a formula based on project funding and milestones\n                    const totalFundingEth = web3 && web3.utils ? parseFloat(web3.utils.fromWei(projectDetails.totalFunding, 'ether')) : parseFloat(projectDetails.totalFunding) / 1e18;\n                    const peopleHelpedEstimate = Math.floor(totalFundingEth * 150);\n                    totalPeopleHelped += peopleHelpedEstimate;\n                }\n            } catch (error) {\n                console.error(\"Error getting details for project \".concat(i, \":\"), error);\n            }\n        }\n        // Format the final totalDonations value\n        let formattedDonations;\n        if (totalDonationsBN) {\n            formattedDonations = web3.utils.fromWei(totalDonationsBN, 'ether');\n        } else {\n            // If we've been tracking in ether already, use that value\n            formattedDonations = totalDonations;\n        }\n        return {\n            totalDonations: formattedDonations,\n            activeCampaigns,\n            peopleHelped: totalPeopleHelped,\n            verifiedNGOs: parseInt(verifiedNGOsCount)\n        };\n    } catch (error) {\n        console.error(\"Error getting dashboard stats:\", error);\n        // In case of error, return demo data as fallback\n        return _demoData__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getDemoStats();\n    }\n};\n// Helper functions for generating test data\nfunction getRandomDisasterType(seed) {\n    const types = Object.values(_constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES);\n    return types[seed % types.length];\n}\nfunction getLocationForDisasterType(disasterType) {\n    const locations = {\n        [_constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES.EARTHQUAKE]: \"Port-au-Prince, Haiti\",\n        [_constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES.HURRICANE]: \"New Orleans, USA\",\n        [_constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES.FLOOD]: \"Kerala, India\",\n        [_constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES.WILDFIRE]: \"California, USA\",\n        [_constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES.DROUGHT]: \"Nairobi, Kenya\",\n        [_constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES.TSUNAMI]: \"Phuket, Thailand\",\n        [_constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES.VOLCANIC_ERUPTION]: \"Bali, Indonesia\",\n        [_constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES.PANDEMIC]: \"Global Response\",\n        [_constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES.OTHER]: \"Multiple Regions\"\n    };\n    return locations[disasterType] || \"Unknown Location\";\n}\nfunction getUrgencyForDisasterType(disasterType) {\n    const urgencies = {\n        [_constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES.EARTHQUAKE]: 5,\n        [_constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES.HURRICANE]: 4,\n        [_constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES.FLOOD]: 4,\n        [_constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES.WILDFIRE]: 3,\n        [_constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES.DROUGHT]: 2,\n        [_constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES.TSUNAMI]: 5,\n        [_constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES.VOLCANIC_ERUPTION]: 3,\n        [_constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES.PANDEMIC]: 4,\n        [_constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES.OTHER]: 3\n    };\n    return urgencies[disasterType] || 3;\n}\nfunction calculateDeadline(projectId) {\n    // Create deterministic but varied deadlines\n    const now = Math.floor(Date.now() / 1000);\n    const daysFromNow = 10 + projectId * 5 % 60; // Between 10 and 70 days\n    return now + daysFromNow * 24 * 60 * 60;\n}\n// Check if an NGO is verified\nconst isNGOVerified = async (ngoAddress)=>{\n    try {\n        await initWeb3();\n        const isVerified = await ngoRegistry.methods.isVerified(ngoAddress).call();\n        return isVerified;\n    } catch (error) {\n        console.error(\"Error checking if NGO is verified:\", error);\n        return false;\n    }\n};\n// Verify document on IPFS\nconst verifyIPFSDocument = async (cid)=>{\n    try {\n        const { accounts } = await initWeb3();\n        await ipfsVerifier.methods.verifyDocument(cid).send({\n            from: accounts[0]\n        });\n        return true;\n    } catch (error) {\n        console.error(\"Error verifying IPFS document:\", error);\n        throw error;\n    }\n};\n// Get contract addresses for frontend display\nconst getContractAddresses = ()=>{\n    return _constants__WEBPACK_IMPORTED_MODULE_8__.CONTRACT_ADDRESSES;\n};\n// Check if wallet was previously connected\nconst checkPreviousConnection = async ()=>{\n    try {\n        // Check localStorage for previous connection\n        const wasConnected = localStorage.getItem('walletConnected') === 'true';\n        if (wasConnected) {\n            // Try to reconnect silently\n            const { connected, accounts } = await initWeb3(false);\n            if (connected) {\n                return {\n                    connected,\n                    address: accounts[0]\n                };\n            }\n        }\n        return {\n            connected: false\n        };\n    } catch (e) {\n        console.warn('Error checking previous connection:', e);\n        return {\n            connected: false\n        };\n    }\n};\n// Add the missing getCurrentAccount function\nconst getCurrentAccount = async ()=>{\n    try {\n        const { web3, accounts } = await initWeb3(false);\n        if (accounts && accounts.length > 0) {\n            return accounts[0];\n        }\n        return null;\n    } catch (error) {\n        console.error(\"Error getting current account:\", error);\n        return null;\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    initWeb3,\n    getReliefCampaigns,\n    getReliefCampaign,\n    getMilestones,\n    donate,\n    getVerificationStatus,\n    getNGODetails,\n    getDashboardStats,\n    isNGOVerified,\n    verifyIPFSDocument,\n    getContractAddresses,\n    DISASTER_TYPES: _constants__WEBPACK_IMPORTED_MODULE_8__.DISASTER_TYPES,\n    URGENCY_LEVELS: _constants__WEBPACK_IMPORTED_MODULE_8__.URGENCY_LEVELS,\n    checkWeb3Connection,\n    connectWallet,\n    getCurrentAccount\n});\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUU7SUFDQUc7SUFDQW5OLGNBQWNBLHdEQUFBQTtJQUNkQyxjQUFjQSx3REFBQUE7SUFDZHNEO0lBQ0FPO0lBQ0F3SjtBQUNGLENBQUMsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFByb2dyYW0gRmlsZXNcXGJsb2NrY2hhaW4tZDNyXFxmcm9udGVuZFxcdXRpbHNcXHdlYjMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFdlYjMgZnJvbSAnd2ViMyc7XHJcbmltcG9ydCBEM1JQcm90b2NvbEFCSSBmcm9tICcuLi9jb250cmFjdHMvRDNSUHJvdG9jb2wuanNvbic7XHJcbmltcG9ydCBNaWxlc3RvbmVGdW5kaW5nQUJJIGZyb20gJy4uL2NvbnRyYWN0cy9NaWxlc3RvbmVGdW5kaW5nLmpzb24nO1xyXG5pbXBvcnQgTkdPUmVnaXN0cnlBQkkgZnJvbSAnLi4vY29udHJhY3RzL05HT1JlZ2lzdHJ5Lmpzb24nO1xyXG5pbXBvcnQgQ2hhaW5saW5rRGlzYXN0ZXJPcmFjbGVBQkkgZnJvbSAnLi4vY29udHJhY3RzL0NoYWlubGlua0Rpc2FzdGVyT3JhY2xlLmpzb24nO1xyXG5pbXBvcnQgSVBGU1ZlcmlmaWVyQUJJIGZyb20gJy4uL2NvbnRyYWN0cy9JUEZTVmVyaWZpZXIuanNvbic7XHJcbmltcG9ydCBGdW5kUG9vbEFCSSBmcm9tICcuLi9jb250cmFjdHMvRnVuZFBvb2wuanNvbic7XHJcbmltcG9ydCBEb25hdGlvblRyYWNrZXJBQkkgZnJvbSAnLi4vY29udHJhY3RzL0RvbmF0aW9uVHJhY2tlci5qc29uJztcclxuXHJcbi8vIEltcG9ydCBjb25zdGFudHNcclxuaW1wb3J0IHsgRElTQVNURVJfVFlQRVMsIFVSR0VOQ1lfTEVWRUxTLCBDT05UUkFDVF9BRERSRVNTRVMgfSBmcm9tICcuL2NvbnN0YW50cyc7XHJcblxyXG4vLyBJbXBvcnQgZGVtbyBkYXRhIHdpdGhvdXQgY3JlYXRpbmcgY2lyY3VsYXIgZGVwZW5kZW5jeVxyXG5pbXBvcnQgZGVtb0RhdGEgZnJvbSAnLi9kZW1vRGF0YSc7XHJcblxyXG5sZXQgd2ViMztcclxubGV0IGQzclByb3RvY29sO1xyXG5sZXQgbWlsZXN0b25lRnVuZGluZztcclxubGV0IG5nb1JlZ2lzdHJ5O1xyXG5sZXQgZGlzYXN0ZXJPcmFjbGU7XHJcbmxldCBpcGZzVmVyaWZpZXI7XHJcbmxldCBmdW5kUG9vbDtcclxubGV0IGRvbmF0aW9uVHJhY2tlcjtcclxuXHJcbi8vIFJlLWV4cG9ydCBjb25zdGFudHMgZm9yIGNvbnZlbmllbmNlXHJcbmV4cG9ydCB7IERJU0FTVEVSX1RZUEVTLCBVUkdFTkNZX0xFVkVMUyB9O1xyXG5cclxuLy8gQ29udHJhY3QgYWRkcmVzc2VzIC0gdXNlIGZyb20gY29uc3RhbnRzXHJcbmNvbnN0IEQzUl9QUk9UT0NPTF9BRERSRVNTID0gQ09OVFJBQ1RfQUREUkVTU0VTLkQzUl9QUk9UT0NPTDtcclxuY29uc3QgTUlMRVNUT05FX0ZVTkRJTkdfQUREUkVTUyA9IENPTlRSQUNUX0FERFJFU1NFUy5NSUxFU1RPTkVfRlVORElORztcclxuY29uc3QgTkdPX1JFR0lTVFJZX0FERFJFU1MgPSBDT05UUkFDVF9BRERSRVNTRVMuTkdPX1JFR0lTVFJZO1xyXG5jb25zdCBESVNBU1RFUl9PUkFDTEVfQUREUkVTUyA9IENPTlRSQUNUX0FERFJFU1NFUy5ESVNBU1RFUl9PUkFDTEU7XHJcbmNvbnN0IElQRlNfVkVSSUZJRVJfQUREUkVTUyA9IENPTlRSQUNUX0FERFJFU1NFUy5JUEZTX1ZFUklGSUVSO1xyXG5jb25zdCBGVU5EX1BPT0xfQUREUkVTUyA9IENPTlRSQUNUX0FERFJFU1NFUy5GVU5EX1BPT0w7XHJcbmNvbnN0IERPTkFUSU9OX1RSQUNLRVJfQUREUkVTUyA9IENPTlRSQUNUX0FERFJFU1NFUy5ET05BVElPTl9UUkFDS0VSO1xyXG5cclxuLy8gSW5pdGlhbGl6ZSBXZWIzIGFuZCBjb250cmFjdCBpbnN0YW5jZXNcclxuZXhwb3J0IGNvbnN0IGluaXRXZWIzID0gYXN5bmMgKGZvcmNlQ29ubmVjdCA9IGZhbHNlKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGxldCBhY2NvdW50cyA9IFtdO1xyXG4gICAgXHJcbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBpbiBhIGJyb3dzZXIgYW5kIGlmIGV0aGVyZXVtIGlzIGluamVjdGVkXHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmV0aGVyZXVtKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiRm91bmQgd2luZG93LmV0aGVyZXVtLCBhdHRlbXB0aW5nIHRvIGNvbm5lY3RcIik7XHJcbiAgICAgIFxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIFJlcXVlc3QgYWNjb3VudCBhY2Nlc3MgaWYgbmVlZGVkIG9yIGlmIGZvcmNlIGNvbm5lY3QgaXMgdHJ1ZVxyXG4gICAgICAgIGlmIChmb3JjZUNvbm5lY3QpIHtcclxuICAgICAgICAgIGFjY291bnRzID0gYXdhaXQgd2luZG93LmV0aGVyZXVtLnJlcXVlc3QoeyBtZXRob2Q6ICdldGhfcmVxdWVzdEFjY291bnRzJyB9KTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRm9yY2VkIGNvbm5lY3QgYWNjb3VudHM6XCIsIGFjY291bnRzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gSnVzdCBnZXQgYWNjb3VudHMgd2l0aG91dCBwcm9tcHRpbmdcclxuICAgICAgICAgIGFjY291bnRzID0gYXdhaXQgd2luZG93LmV0aGVyZXVtLnJlcXVlc3QoeyBtZXRob2Q6ICdldGhfYWNjb3VudHMnIH0pO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJDdXJyZW50IGFjY291bnRzOlwiLCBhY2NvdW50cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENyZWF0ZSBXZWIzIGluc3RhbmNlXHJcbiAgICAgICAgd2ViMyA9IG5ldyBXZWIzKHdpbmRvdy5ldGhlcmV1bSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU2V0IHVwIGV2ZW50IGxpc3RlbmVycyBmb3IgYWNjb3VudC9uZXR3b3JrIGNoYW5nZXMgaWYgdGhleSBkb24ndCBleGlzdFxyXG4gICAgICAgIGlmICghd2luZG93LmV0aGVyZXVtLl9ldmVudHMgfHwgIXdpbmRvdy5ldGhlcmV1bS5fZXZlbnRzLmFjY291bnRzQ2hhbmdlZCkge1xyXG4gICAgICAgICAgd2luZG93LmV0aGVyZXVtLm9uKCdhY2NvdW50c0NoYW5nZWQnLCAobmV3QWNjb3VudHMpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2FjY291bnRzQ2hhbmdlZCcsIG5ld0FjY291bnRzKTtcclxuICAgICAgICAgICAgLy8gRGlzcGF0Y2ggYSBjdXN0b20gZXZlbnQgdGhhdCBjb21wb25lbnRzIGNhbiBsaXN0ZW4gZm9yXHJcbiAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnd2FsbGV0QWNjb3VudENoYW5nZWQnLCB7IGRldGFpbDogbmV3QWNjb3VudHMgfSkpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHdpbmRvdy5ldGhlcmV1bS5vbignY2hhaW5DaGFuZ2VkJywgKGNoYWluSWQpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NoYWluQ2hhbmdlZCcsIGNoYWluSWQpO1xyXG4gICAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3dhbGxldENoYWluQ2hhbmdlZCcsIHsgZGV0YWlsOiBjaGFpbklkIH0pKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICB3aW5kb3cuZXRoZXJldW0ub24oJ2Rpc2Nvbm5lY3QnLCAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2Rpc2Nvbm5lY3QnLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnd2FsbGV0RGlzY29ubmVjdGVkJykpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZXF1ZXN0aW5nIGFjY291bnQgYWNjZXNzOlwiLCBlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LndlYjMpIHtcclxuICAgICAgLy8gTGVnYWN5IHN1cHBvcnQgZm9yIG9sZGVyIE1ldGFNYXNrL1dlYjMgaW1wbGVtZW50YXRpb25zXHJcbiAgICAgIGNvbnNvbGUubG9nKFwiRm91bmQgbGVnYWN5IHdlYjNcIik7XHJcbiAgICAgIHdlYjMgPSBuZXcgV2ViMyh3aW5kb3cud2ViMy5jdXJyZW50UHJvdmlkZXIpO1xyXG4gICAgICBhY2NvdW50cyA9IGF3YWl0IHdlYjMuZXRoLmdldEFjY291bnRzKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIk5vIFdlYjMgd2FsbGV0IGRldGVjdGVkLCB1c2luZyByZWFkLW9ubHkgcHJvdmlkZXJcIik7XHJcbiAgICAgIC8vIFNldCB1cCBhIHJlYWQtb25seSBwcm92aWRlciBmb3Igbm9uLXdhbGxldCB1c2Vyc1xyXG4gICAgICBjb25zdCBwcm92aWRlciA9IG5ldyBXZWIzLnByb3ZpZGVycy5IdHRwUHJvdmlkZXIoXHJcbiAgICAgICAgXCJodHRwczovL2V0aC1zZXBvbGlhLmcuYWxjaGVteS5jb20vdjIvZGVtb1wiXHJcbiAgICAgICk7XHJcbiAgICAgIHdlYjMgPSBuZXcgV2ViMyhwcm92aWRlcik7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEluaXRpYWxpemUgY29udHJhY3QgaW5zdGFuY2VzIG9ubHkgaWYgd2ViMyBpcyBzZXR1cFxyXG4gICAgaWYgKHdlYjMpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBkM3JQcm90b2NvbCA9IG5ldyB3ZWIzLmV0aC5Db250cmFjdChEM1JQcm90b2NvbEFCSS5hYmksIEQzUl9QUk9UT0NPTF9BRERSRVNTKTtcclxuICAgICAgICBtaWxlc3RvbmVGdW5kaW5nID0gbmV3IHdlYjMuZXRoLkNvbnRyYWN0KE1pbGVzdG9uZUZ1bmRpbmdBQkkuYWJpLCBNSUxFU1RPTkVfRlVORElOR19BRERSRVNTKTtcclxuICAgICAgICBuZ29SZWdpc3RyeSA9IG5ldyB3ZWIzLmV0aC5Db250cmFjdChOR09SZWdpc3RyeUFCSS5hYmksIE5HT19SRUdJU1RSWV9BRERSRVNTKTtcclxuICAgICAgICBkaXNhc3Rlck9yYWNsZSA9IG5ldyB3ZWIzLmV0aC5Db250cmFjdChDaGFpbmxpbmtEaXNhc3Rlck9yYWNsZUFCSS5hYmksIERJU0FTVEVSX09SQUNMRV9BRERSRVNTKTtcclxuICAgICAgICBpcGZzVmVyaWZpZXIgPSBuZXcgd2ViMy5ldGguQ29udHJhY3QoSVBGU1ZlcmlmaWVyQUJJLmFiaSwgSVBGU19WRVJJRklFUl9BRERSRVNTKTtcclxuICAgICAgICBmdW5kUG9vbCA9IG5ldyB3ZWIzLmV0aC5Db250cmFjdChGdW5kUG9vbEFCSS5hYmksIEZVTkRfUE9PTF9BRERSRVNTKTtcclxuICAgICAgICBkb25hdGlvblRyYWNrZXIgPSBuZXcgd2ViMy5ldGguQ29udHJhY3QoRG9uYXRpb25UcmFja2VyQUJJLmFiaSwgRE9OQVRJT05fVFJBQ0tFUl9BRERSRVNTKTtcclxuICAgICAgICBcclxuICAgICAgICB3aW5kb3cud2ViMyA9IHdlYjM7IC8vIE1ha2Ugd2ViMyBhdmFpbGFibGUgZ2xvYmFsbHkgZm9yIHV0aWxpdHkgZnVuY3Rpb25zXHJcbiAgICAgIH0gY2F0Y2ggKGNvbnRyYWN0RXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW5pdGlhbGl6aW5nIGNvbnRyYWN0czpcIiwgY29udHJhY3RFcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHsgd2ViMywgYWNjb3VudHMsIGNvbm5lY3RlZDogYWNjb3VudHMubGVuZ3RoID4gMCB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW5pdGlhbGl6aW5nIHdlYjM6XCIsIGVycm9yKTtcclxuICAgIHJldHVybiB7IHdlYjM6IG51bGwsIGFjY291bnRzOiBbXSwgY29ubmVjdGVkOiBmYWxzZSB9O1xyXG4gIH1cclxufTtcclxuXHJcbi8vIENoZWNrIGNvbm5lY3Rpb24gc3RhdHVzXHJcbmV4cG9ydCBjb25zdCBjaGVja1dlYjNDb25uZWN0aW9uID0gYXN5bmMgKCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHdlYjMsIGFjY291bnRzIH0gPSBhd2FpdCBpbml0V2ViMygpO1xyXG4gICAgXHJcbiAgICBpZiAoIXdlYjMpIHtcclxuICAgICAgcmV0dXJuICdXZWIzIG5vdCBhdmFpbGFibGUnO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoIWFjY291bnRzIHx8IGFjY291bnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gJ05vdCBjb25uZWN0ZWQgdG8gd2FsbGV0JztcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgbmV0d29ya0lkID0gYXdhaXQgd2ViMy5ldGgubmV0LmdldElkKCk7XHJcbiAgICBjb25zdCBuZXR3b3JrVHlwZSA9IGF3YWl0IHdlYjMuZXRoLm5ldC5nZXROZXR3b3JrVHlwZSgpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gYENvbm5lY3RlZCB0byAke2FjY291bnRzWzBdfSBvbiAke25ldHdvcmtUeXBlfSAoJHtuZXR3b3JrSWR9KWA7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJDb25uZWN0aW9uIGNoZWNrIGZhaWxlZDpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGBDb25uZWN0aW9uIGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YDtcclxuICB9XHJcbn07XHJcblxyXG4vLyBDb25uZWN0IHdhbGxldCBleHBsaWNpdGx5IChmb3IgY29ubmVjdCBidXR0b24pXHJcbmV4cG9ydCBjb25zdCBjb25uZWN0V2FsbGV0ID0gYXN5bmMgKCkgPT4ge1xyXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZXRoZXJldW0pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIEZvcmNlIHJlcXVlc3QgYWNjb3VudCBhY2Nlc3Mgd2l0aCBVSSBwcm9tcHRcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaW5pdFdlYjModHJ1ZSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIXJlc3VsdC5jb25uZWN0ZWQpIHtcclxuICAgICAgICByZXR1cm4geyBcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcclxuICAgICAgICAgIGVycm9yOiBcIlVzZXIgZGVuaWVkIGFjY291bnQgYWNjZXNzXCJcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBDaGVjayBpZiB3ZSdyZSBvbiB0aGUgcmlnaHQgbmV0d29ya1xyXG4gICAgICBjb25zdCBuZXR3b3JrSWQgPSBhd2FpdCB3ZWIzLmV0aC5uZXQuZ2V0SWQoKTtcclxuICAgICAgY29uc3QgbmV0d29ya1R5cGUgPSBhd2FpdCB3ZWIzLmV0aC5uZXQuZ2V0TmV0d29ya1R5cGUoKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGV4cGVjdGVkTmV0d29yayA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX05FVFdPUktfSUQgfHwgJzEnO1xyXG4gICAgICBjb25zdCBuZXR3b3JrTmFtZSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX05FVFdPUktfTkFNRSB8fCAnRXRoZXJldW0gTWFpbm5ldCc7XHJcbiAgICAgIFxyXG4gICAgICBpZiAobmV0d29ya0lkLnRvU3RyaW5nKCkgIT09IGV4cGVjdGVkTmV0d29yaykge1xyXG4gICAgICAgIC8vIFByb21wdCB1c2VyIHRvIHN3aXRjaCBuZXR3b3Jrc1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBhd2FpdCB3aW5kb3cuZXRoZXJldW0ucmVxdWVzdCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ3dhbGxldF9zd2l0Y2hFdGhlcmV1bUNoYWluJyxcclxuICAgICAgICAgICAgcGFyYW1zOiBbeyBjaGFpbklkOiBgMHgke3BhcnNlSW50KGV4cGVjdGVkTmV0d29yaykudG9TdHJpbmcoMTYpfWAgfV0sXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChzd2l0Y2hFcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzd2l0Y2ggbmV0d29ya3M6XCIsIHN3aXRjaEVycm9yKTtcclxuICAgICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgICAgICAgIGVycm9yOiBgUGxlYXNlIHN3aXRjaCB0byAke25ldHdvcmtOYW1lfSBpbiB5b3VyIHdhbGxldGBcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBTYXZlIGNvbm5lY3RlZCBzdGF0dXMgdG8gbG9jYWxTdG9yYWdlXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3dhbGxldENvbm5lY3RlZCcsICd0cnVlJyk7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBzYXZlIGNvbm5lY3Rpb24gc3RhdGUgdG8gbG9jYWxTdG9yYWdlOicsIGUpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4geyBcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLCBcclxuICAgICAgICBhZGRyZXNzOiByZXN1bHQuYWNjb3VudHNbMF0sXHJcbiAgICAgICAgbmV0d29ya0lkLFxyXG4gICAgICAgIG5ldHdvcmtUeXBlXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNvbm5lY3Qgd2FsbGV0OlwiLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiB7IFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcclxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCBcIkZhaWxlZCB0byBjb25uZWN0IHdhbGxldFwiIFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4geyBcclxuICAgICAgc3VjY2VzczogZmFsc2UsIFxyXG4gICAgICBlcnJvcjogXCJObyBFdGhlcmV1bSB3YWxsZXQgZGV0ZWN0ZWQuIFBsZWFzZSBpbnN0YWxsIE1ldGFNYXNrLlwiIFxyXG4gICAgfTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBHZXQgYWxsIGFjdGl2ZSByZWxpZWYgY2FtcGFpZ25zIHdpdGggdmVyaWZpY2F0aW9uIHN0YXR1c1xyXG5leHBvcnQgY29uc3QgZ2V0UmVsaWVmQ2FtcGFpZ25zID0gYXN5bmMgKGZpbHRlcnMgPSB7fSkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBpbiBkZW1vIG1vZGVcclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBjb25zdCBpc0RlbW9Nb2RlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RlbW9Nb2RlJykgPT09ICd0cnVlJztcclxuICAgICAgaWYgKGlzRGVtb01vZGUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlVzaW5nIGRlbW8gY2FtcGFpZ24gZGF0YVwiKTtcclxuICAgICAgICByZXR1cm4gZGVtb0RhdGEuZ2V0RGVtb0NhbXBhaWducyhmaWx0ZXJzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IGluaXRXZWIzKCk7XHJcbiAgICBcclxuICAgIC8vIEdldCBwcm9qZWN0IGNvdW50XHJcbiAgICBjb25zdCBwcm9qZWN0Q291bnQgPSBhd2FpdCBtaWxlc3RvbmVGdW5kaW5nLm1ldGhvZHMucHJvamVjdENvdW50KCkuY2FsbCgpO1xyXG4gICAgY29uc3QgY2FtcGFpZ25zID0gW107XHJcbiAgICBcclxuICAgIC8vIExvYWQgYWxsIHByb2plY3RzXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb2plY3RDb3VudDsgaSsrKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcHJvamVjdERldGFpbHMgPSBhd2FpdCBtaWxlc3RvbmVGdW5kaW5nLm1ldGhvZHMuZ2V0UHJvamVjdERldGFpbHMoaSkuY2FsbCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE9ubHkgaW5jbHVkZSBhY3RpdmUgcHJvamVjdHNcclxuICAgICAgICBpZiAocHJvamVjdERldGFpbHMuaXNBY3RpdmUpIHtcclxuICAgICAgICAgIC8vIFRyeSB0byBnZXQgbWV0YWRhdGEgYWJvdXQgdGhlIGRpc2FzdGVyIChjb3VsZCBiZSBzdG9yZWQgaW4gSVBGUyBvciBhcyBldmVudHMpXHJcbiAgICAgICAgICBsZXQgbWV0YWRhdGEgPSB7fTtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIEluIGEgcHJvZHVjdGlvbiBlbnZpcm9ubWVudCwgd2Ugd291bGQgZmV0Y2ggbWV0YWRhdGEgZnJvbSBJUEZTIG9yIGJsb2NrY2hhaW4gZXZlbnRzXHJcbiAgICAgICAgICAgIC8vIEZvciBub3csIHdlJ2xsIHVzZSBwbGFjZWhvbGRlciBkYXRhXHJcbiAgICAgICAgICAgIGNvbnN0IGRpc2FzdGVyVHlwZSA9IGdldFJhbmRvbURpc2FzdGVyVHlwZShpKTtcclxuICAgICAgICAgICAgY29uc3QgZGlzYXN0ZXJJZCA9IGBEUy0kezIwMjN9LSR7MTAwMCArIGl9YDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG1ldGFkYXRhID0ge1xyXG4gICAgICAgICAgICAgIGRpc2FzdGVyVHlwZTogZGlzYXN0ZXJUeXBlLFxyXG4gICAgICAgICAgICAgIGxvY2F0aW9uOiBnZXRMb2NhdGlvbkZvckRpc2FzdGVyVHlwZShkaXNhc3RlclR5cGUpLFxyXG4gICAgICAgICAgICAgIGRpc2FzdGVySWQ6IGRpc2FzdGVySWQsXHJcbiAgICAgICAgICAgICAgdXJnZW5jeUxldmVsOiBnZXRVcmdlbmN5Rm9yRGlzYXN0ZXJUeXBlKGRpc2FzdGVyVHlwZSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFRyeSB0byBnZXQgdmVyaWZpY2F0aW9uIGZyb20gdGhlIE9yYWNsZSBjb250cmFjdFxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHZlcmlmaWNhdGlvbiA9IGF3YWl0IGRpc2FzdGVyT3JhY2xlLm1ldGhvZHMuZ2V0RGlzYXN0ZXJWZXJpZmljYXRpb24oZGlzYXN0ZXJJZCkuY2FsbCgpO1xyXG4gICAgICAgICAgICAgIG1ldGFkYXRhLnZlcmlmaWVkID0gdmVyaWZpY2F0aW9uLnZlcmlmaWVkO1xyXG4gICAgICAgICAgICAgIG1ldGFkYXRhLmNvbmZpZGVuY2UgPSB2ZXJpZmljYXRpb24uY29uZmlkZW5jZTtcclxuICAgICAgICAgICAgICBtZXRhZGF0YS5zb3VyY2UgPSB2ZXJpZmljYXRpb24uc291cmNlIHx8IFwiQ2hhaW5saW5rIE9yYWNsZXNcIjtcclxuICAgICAgICAgICAgfSBjYXRjaCAodmVyaWZpY2F0aW9uRXJyb3IpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQ291bGQgbm90IGdldCB2ZXJpZmljYXRpb24gZm9yIGRpc2FzdGVyICR7ZGlzYXN0ZXJJZH1gLCB2ZXJpZmljYXRpb25FcnJvcik7XHJcbiAgICAgICAgICAgICAgbWV0YWRhdGEudmVyaWZpZWQgPSBpICUgMyA9PT0gMDsgLy8gRm9yIHRlc3Rpbmc6IG1ha2UgZXZlcnkgdGhpcmQgcHJvamVjdCB2ZXJpZmllZFxyXG4gICAgICAgICAgICAgIG1ldGFkYXRhLmNvbmZpZGVuY2UgPSBtZXRhZGF0YS52ZXJpZmllZCA/IDg1IDogMDtcclxuICAgICAgICAgICAgICBtZXRhZGF0YS5zb3VyY2UgPSBtZXRhZGF0YS52ZXJpZmllZCA/IFwiQ2hhaW5saW5rIFdlYXRoZXIgRGF0YVwiIDogXCJcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBjYXRjaCAobWV0YWRhdGFFcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyBtZXRhZGF0YSBmb3IgcHJvamVjdCAke2l9OmAsIG1ldGFkYXRhRXJyb3IpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBBcHBseSBmaWx0ZXJzIGlmIHByb3ZpZGVkXHJcbiAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIChmaWx0ZXJzLmRpc2FzdGVyVHlwZSAmJiBtZXRhZGF0YS5kaXNhc3RlclR5cGUgIT09IGZpbHRlcnMuZGlzYXN0ZXJUeXBlKSB8fFxyXG4gICAgICAgICAgICAoZmlsdGVycy5sb2NhdGlvbiAmJiAhbWV0YWRhdGEubG9jYXRpb24/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoZmlsdGVycy5sb2NhdGlvbi50b0xvd2VyQ2FzZSgpKSkgfHxcclxuICAgICAgICAgICAgKGZpbHRlcnMudXJnZW5jeSA+IDAgJiYgbWV0YWRhdGEudXJnZW5jeUxldmVsICE9PSBwYXJzZUludChmaWx0ZXJzLnVyZ2VuY3kpKVxyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBTa2lwIHRoaXMgY2FtcGFpZ24gaWYgaXQgZG9lc24ndCBtYXRjaCBmaWx0ZXJzXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIEdldCBtaWxlc3RvbmUgaW5mb3JtYXRpb25cclxuICAgICAgICAgIGNvbnN0IG1pbGVzdG9uZXMgPSBbXTtcclxuICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcHJvamVjdERldGFpbHMubWlsZXN0b25lQ291bnQ7IGorKykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IG1pbGVzdG9uZSA9IGF3YWl0IG1pbGVzdG9uZUZ1bmRpbmcubWV0aG9kcy5nZXRNaWxlc3RvbmVEZXRhaWxzKGksIGopLmNhbGwoKTtcclxuICAgICAgICAgICAgICBtaWxlc3RvbmVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgLi4ubWlsZXN0b25lLFxyXG4gICAgICAgICAgICAgICAgaWQ6IGpcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBjYXRjaCAobWlsZXN0b25lRXJyb3IpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyBtaWxlc3RvbmUgJHtqfSBmb3IgcHJvamVjdCAke2l9OmAsIG1pbGVzdG9uZUVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBHZXQgTkdPIGRldGFpbHNcclxuICAgICAgICAgIGxldCBuZ29EZXRhaWxzID0geyBuYW1lOiBcIlVua25vd24gTkdPXCIgfTtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIG5nb0RldGFpbHMgPSBhd2FpdCBuZ29SZWdpc3RyeS5tZXRob2RzLmdldE5HT0RldGFpbHMocHJvamVjdERldGFpbHMubmdvQWRkcmVzcykuY2FsbCgpO1xyXG4gICAgICAgICAgfSBjYXRjaCAobmdvRXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmV0Y2hpbmcgTkdPIGRldGFpbHMgZm9yIGFkZHJlc3MgJHtwcm9qZWN0RGV0YWlscy5uZ29BZGRyZXNzfTpgLCBuZ29FcnJvcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIEFkZCBjYW1wYWlnbiB0byB0aGUgbGlzdFxyXG4gICAgICAgICAgY2FtcGFpZ25zLnB1c2goe1xyXG4gICAgICAgICAgICBpZDogaSxcclxuICAgICAgICAgICAgdGl0bGU6IHByb2plY3REZXRhaWxzLm5hbWUsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBwcm9qZWN0RGV0YWlscy5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgY3JlYXRvcjogcHJvamVjdERldGFpbHMubmdvQWRkcmVzcyxcclxuICAgICAgICAgICAgbmdvTmFtZTogbmdvRGV0YWlscy5uYW1lIHx8IFwiVW5rbm93biBOR09cIixcclxuICAgICAgICAgICAgY3VycmVudEFtb3VudDogcHJvamVjdERldGFpbHMucmVsZWFzZWRGdW5kaW5nLFxyXG4gICAgICAgICAgICB0YXJnZXRBbW91bnQ6IHByb2plY3REZXRhaWxzLnRvdGFsRnVuZGluZyxcclxuICAgICAgICAgICAgbWlsZXN0b25lc0NvbXBsZXRlZDogcGFyc2VJbnQocHJvamVjdERldGFpbHMubWlsZXN0b25lc0NvbXBsZXRlZCksXHJcbiAgICAgICAgICAgIG1pbGVzdG9uZUNvdW50OiBwYXJzZUludChwcm9qZWN0RGV0YWlscy5taWxlc3RvbmVDb3VudCksXHJcbiAgICAgICAgICAgIG1pbGVzdG9uZXM6IG1pbGVzdG9uZXMsXHJcbiAgICAgICAgICAgIGlzQWN0aXZlOiBwcm9qZWN0RGV0YWlscy5pc0FjdGl2ZSxcclxuICAgICAgICAgICAgZGVhZGxpbmU6IGNhbGN1bGF0ZURlYWRsaW5lKGkpLFxyXG4gICAgICAgICAgICBwYXJzZWRNZXRhZGF0YTogbWV0YWRhdGFcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAocHJvamVjdEVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgbG9hZGluZyBwcm9qZWN0ICR7aX06YCwgcHJvamVjdEVycm9yKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gY2FtcGFpZ25zO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyByZWxpZWYgY2FtcGFpZ25zOlwiLCBlcnJvcik7XHJcbiAgICAvLyBSZXR1cm4gZGVtbyBkYXRhIGFzIGZhbGxiYWNrIGluIGNhc2Ugb2YgZXJyb3JcclxuICAgIHJldHVybiBkZW1vRGF0YS5nZXREZW1vQ2FtcGFpZ25zKGZpbHRlcnMpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEdldCBhIHNwZWNpZmljIGNhbXBhaWduIGJ5IElEXHJcbmV4cG9ydCBjb25zdCBnZXRSZWxpZWZDYW1wYWlnbiA9IGFzeW5jIChpZCkgPT4ge1xyXG4gIC8vIENoZWNrIGlmIHdlJ3JlIGluIGRlbW8gbW9kZVxyXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgY29uc3QgaXNEZW1vTW9kZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkZW1vTW9kZScpID09PSAndHJ1ZSc7XHJcbiAgICBpZiAoaXNEZW1vTW9kZSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlVzaW5nIGRlbW8gY2FtcGFpZ24gZGF0YSBmb3IgSUQ6XCIsIGlkKTtcclxuICAgICAgcmV0dXJuIGRlbW9EYXRhLmdldERlbW9DYW1wYWlnbihpZCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBjYW1wYWlnbnMgPSBhd2FpdCBnZXRSZWxpZWZDYW1wYWlnbnMoKTtcclxuICAgIHJldHVybiBjYW1wYWlnbnMuZmluZChjID0+IGMuaWQudG9TdHJpbmcoKSA9PT0gaWQ/LnRvU3RyaW5nKCkpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBnZXR0aW5nIGNhbXBhaWduIHdpdGggSUQgJHtpZH06YCwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGRlbW9EYXRhLmdldERlbW9DYW1wYWlnbihpZCk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gR2V0IG1pbGVzdG9uZXMgZm9yIGEgY2FtcGFpZ25cclxuZXhwb3J0IGNvbnN0IGdldE1pbGVzdG9uZXMgPSBhc3luYyAoY2FtcGFpZ25JZCkgPT4ge1xyXG4gIC8vIENoZWNrIGlmIHdlJ3JlIGluIGRlbW8gbW9kZVxyXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgY29uc3QgaXNEZW1vTW9kZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkZW1vTW9kZScpID09PSAndHJ1ZSc7XHJcbiAgICBpZiAoaXNEZW1vTW9kZSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlVzaW5nIGRlbW8gbWlsZXN0b25lIGRhdGFcIik7XHJcbiAgICAgIHJldHVybiBkZW1vRGF0YS5nZXREZW1vTWlsZXN0b25lcyhjYW1wYWlnbklkKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGNhbXBhaWduID0gYXdhaXQgZ2V0UmVsaWVmQ2FtcGFpZ24oY2FtcGFpZ25JZCk7XHJcbiAgICByZXR1cm4gY2FtcGFpZ24/Lm1pbGVzdG9uZXMgfHwgW107XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGdldHRpbmcgbWlsZXN0b25lcyBmb3IgY2FtcGFpZ24gJHtjYW1wYWlnbklkfTpgLCBlcnJvcik7XHJcbiAgICByZXR1cm4gZGVtb0RhdGEuZ2V0RGVtb01pbGVzdG9uZXMoY2FtcGFpZ25JZCk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gRG9uYXRlIHRvIGEgcmVsaWVmIGNhbXBhaWduXHJcbmV4cG9ydCBjb25zdCBkb25hdGUgPSBhc3luYyAoY2FtcGFpZ25JZCwgYW1vdW50KSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgd2ViMywgYWNjb3VudHMgfSA9IGF3YWl0IGluaXRXZWIzKCk7XHJcbiAgICBpZiAoIWFjY291bnRzIHx8IGFjY291bnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjb25uZWN0ZWQgd2FsbGV0IGFjY291bnRzXCIpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBhbW91bnRXZWkgPSB3ZWIzLnV0aWxzLnRvV2VpKGFtb3VudC50b1N0cmluZygpLCAnZXRoZXInKTtcclxuICAgIFxyXG4gICAgLy8gR2V0IHRoZSBwcm9qZWN0IGRldGFpbHMgdG8gY2hlY2sgaWYgaXQncyBhY3RpdmVcclxuICAgIGNvbnN0IHByb2plY3REZXRhaWxzID0gYXdhaXQgbWlsZXN0b25lRnVuZGluZy5tZXRob2RzLmdldFByb2plY3REZXRhaWxzKGNhbXBhaWduSWQpLmNhbGwoKTtcclxuICAgIGlmICghcHJvamVjdERldGFpbHMuaXNBY3RpdmUpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyByZWxpZWYgcHJvamVjdCBpcyBubyBsb25nZXIgYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBUaGVyZSdzIG5vIGRpcmVjdCBkb25hdGlvbiBtZXRob2QgaW4gTWlsZXN0b25lRnVuZGluZyBpbiB0aGUgY29udHJhY3QgY29kZVxyXG4gICAgLy8gV2UnbGwgdXNlIEQzUlByb3RvY29sIHRvIGhhbmRsZSB0aGUgZG9uYXRpb25cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFRyeSB0byBkb25hdGUgdmlhIHRoZSBtYWluIHByb3RvY29sIGNvbnRyYWN0XHJcbiAgICAgIGF3YWl0IGQzclByb3RvY29sLm1ldGhvZHMuZG9uYXRlVG9Qcm9qZWN0KGNhbXBhaWduSWQpLnNlbmQoe1xyXG4gICAgICAgIGZyb206IGFjY291bnRzWzBdLFxyXG4gICAgICAgIHZhbHVlOiBhbW91bnRXZWlcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChwcm90b2NvbEVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJEM1JQcm90b2NvbCBkb25hdGlvbiBmYWlsZWQsIHRyeWluZyBkaXJlY3QgdHJhbnNhY3Rpb246XCIsIHByb3RvY29sRXJyb3IpO1xyXG4gICAgICBcclxuICAgICAgLy8gSWYgdGhlIHByb3RvY29sIGRvZXNuJ3QgaGF2ZSBhIGRvbmF0ZVRvUHJvamVjdCBtZXRob2QsIHRyeSBhIGRpcmVjdCB0cmFuc2FjdGlvblxyXG4gICAgICBhd2FpdCB3ZWIzLmV0aC5zZW5kVHJhbnNhY3Rpb24oe1xyXG4gICAgICAgIGZyb206IGFjY291bnRzWzBdLFxyXG4gICAgICAgIHRvOiBNSUxFU1RPTkVfRlVORElOR19BRERSRVNTLFxyXG4gICAgICAgIHZhbHVlOiBhbW91bnRXZWksXHJcbiAgICAgICAgZGF0YTogd2ViMy5ldGguYWJpLmVuY29kZUZ1bmN0aW9uQ2FsbCh7XHJcbiAgICAgICAgICBuYW1lOiAnYWRkRnVuZHNUb1Byb2plY3QnLCAvLyBUaGlzIGZ1bmN0aW9uIG5hbWUgZGVwZW5kcyBvbiB5b3VyIGFjdHVhbCBjb250cmFjdCBpbXBsZW1lbnRhdGlvblxyXG4gICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcclxuICAgICAgICAgIGlucHV0czogW3sgdHlwZTogJ3VpbnQyNTYnLCBuYW1lOiAncHJvamVjdElkJyB9XVxyXG4gICAgICAgIH0sIFtjYW1wYWlnbklkXSlcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZG9uYXRpbmcgdG8gY2FtcGFpZ246XCIsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEdldCB2ZXJpZmljYXRpb24gc3RhdHVzIG9mIGEgcmVsaWVmIGNhbXBhaWduXHJcbmV4cG9ydCBjb25zdCBnZXRWZXJpZmljYXRpb25TdGF0dXMgPSBhc3luYyAoZGlzYXN0ZXJJZCkgPT4ge1xyXG4gIC8vIENoZWNrIGlmIHdlJ3JlIGluIGRlbW8gbW9kZVxyXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgY29uc3QgaXNEZW1vTW9kZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkZW1vTW9kZScpID09PSAndHJ1ZSc7XHJcbiAgICBpZiAoaXNEZW1vTW9kZSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlVzaW5nIGRlbW8gdmVyaWZpY2F0aW9uIGRhdGFcIik7XHJcbiAgICAgIHJldHVybiBkZW1vRGF0YS5nZXREZW1vVmVyaWZpY2F0aW9uKGRpc2FzdGVySWQpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICB0cnkge1xyXG4gICAgYXdhaXQgaW5pdFdlYjMoKTtcclxuICAgIGNvbnN0IHZlcmlmaWNhdGlvbiA9IGF3YWl0IGRpc2FzdGVyT3JhY2xlLm1ldGhvZHMuZ2V0RGlzYXN0ZXJWZXJpZmljYXRpb24oZGlzYXN0ZXJJZCkuY2FsbCgpO1xyXG4gICAgcmV0dXJuIHZlcmlmaWNhdGlvbjtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdldHRpbmcgdmVyaWZpY2F0aW9uIHN0YXR1czpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGRlbW9EYXRhLmdldERlbW9WZXJpZmljYXRpb24oZGlzYXN0ZXJJZCk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gR2V0IE5HTyBkZXRhaWxzXHJcbmV4cG9ydCBjb25zdCBnZXROR09EZXRhaWxzID0gYXN5bmMgKG5nb0FkZHJlc3MpID0+IHtcclxuICAvLyBDaGVjayBpZiB3ZSdyZSBpbiBkZW1vIG1vZGVcclxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIGNvbnN0IGlzRGVtb01vZGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGVtb01vZGUnKSA9PT0gJ3RydWUnO1xyXG4gICAgaWYgKGlzRGVtb01vZGUpIHtcclxuICAgICAgY29uc29sZS5sb2coXCJVc2luZyBkZW1vIE5HTyBkYXRhXCIpO1xyXG4gICAgICByZXR1cm4gZGVtb0RhdGEuZ2V0RGVtb05HTyhuZ29BZGRyZXNzKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGluaXRXZWIzKCk7XHJcbiAgICBjb25zdCBuZ29EZXRhaWxzID0gYXdhaXQgbmdvUmVnaXN0cnkubWV0aG9kcy5nZXROR09EZXRhaWxzKG5nb0FkZHJlc3MpLmNhbGwoKTtcclxuICAgIHJldHVybiBuZ29EZXRhaWxzO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBOR08gZGV0YWlsczpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGRlbW9EYXRhLmdldERlbW9OR08obmdvQWRkcmVzcyk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gR2V0IGRhc2hib2FyZCBzdGF0c1xyXG5leHBvcnQgY29uc3QgZ2V0RGFzaGJvYXJkU3RhdHMgPSBhc3luYyAoKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIENoZWNrIGlmIHdlJ3JlIGluIGRlbW8gbW9kZVxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgIC8vIFRoaXMgaXMgYSBjbGllbnQtc2lkZSBjaGVjayBmb3IgZGVtbyBtb2RlXHJcbiAgICAgIGNvbnN0IGlzRGVtb01vZGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGVtb01vZGUnKSA9PT0gJ3RydWUnO1xyXG4gICAgICBpZiAoaXNEZW1vTW9kZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiVXNpbmcgZGVtbyBzdGF0cyBkYXRhXCIpO1xyXG4gICAgICAgIHJldHVybiBkZW1vRGF0YS5nZXREZW1vU3RhdHMoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCB7IHdlYjMgfSA9IGF3YWl0IGluaXRXZWIzKCk7XHJcbiAgICBcclxuICAgIC8vIEdldCBOR08gY291bnRcclxuICAgIGxldCB2ZXJpZmllZE5HT3NDb3VudCA9IDA7XHJcbiAgICB0cnkge1xyXG4gICAgICB2ZXJpZmllZE5HT3NDb3VudCA9IGF3YWl0IG5nb1JlZ2lzdHJ5Lm1ldGhvZHMuZ2V0VmVyaWZpZWROR09zQ291bnQoKS5jYWxsKCk7XHJcbiAgICB9IGNhdGNoIChuZ29FcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyB2ZXJpZmllZCBOR08gY291bnQ6XCIsIG5nb0Vycm9yKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gR2V0IHByb2plY3QgY291bnQgYW5kIGNhbGN1bGF0ZSB0b3RhbCBmdW5kaW5nIGFuZCBwZW9wbGUgaGVscGVkXHJcbiAgICBsZXQgcHJvamVjdENvdW50ID0gMDtcclxuICAgIHRyeSB7XHJcbiAgICAgIHByb2plY3RDb3VudCA9IGF3YWl0IG1pbGVzdG9uZUZ1bmRpbmcubWV0aG9kcy5wcm9qZWN0Q291bnQoKS5jYWxsKCk7XHJcbiAgICB9IGNhdGNoIChwcm9qZWN0RXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdldHRpbmcgcHJvamVjdCBjb3VudDpcIiwgcHJvamVjdEVycm9yKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gU2FmZWx5IGNyZWF0ZSBhIEJpZ051bWJlciAoaWYgd2ViMy51dGlscy50b0JOIGlzbid0IGF2YWlsYWJsZSwgdXNlIHN0YW5kYXJkIHN0cmluZyBoYW5kbGluZylcclxuICAgIGxldCB0b3RhbERvbmF0aW9ucyA9IFwiMFwiO1xyXG4gICAgbGV0IHRvdGFsRG9uYXRpb25zQk47XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gQ2hlY2sgaWYgd2ViMy51dGlscyBoYXMgdGhlIHRvQk4gZnVuY3Rpb25cclxuICAgICAgaWYgKHdlYjMgJiYgd2ViMy51dGlscyAmJiB0eXBlb2Ygd2ViMy51dGlscy50b0JOID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdG90YWxEb25hdGlvbnNCTiA9IHdlYjMudXRpbHMudG9CTihcIjBcIik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gRmFsbGJhY2sgdG8gc3RyaW5nLWJhc2VkIGhhbmRsaW5nXHJcbiAgICAgICAgdG90YWxEb25hdGlvbnMgPSBcIjBcIjtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHdpdGggQmlnTnVtYmVyIGhhbmRsaW5nOlwiLCBlcnJvcik7XHJcbiAgICAgIHRvdGFsRG9uYXRpb25zID0gXCIwXCI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGxldCBhY3RpdmVDYW1wYWlnbnMgPSAwO1xyXG4gICAgbGV0IHRvdGFsUGVvcGxlSGVscGVkID0gMDtcclxuICAgIFxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9qZWN0Q291bnQ7IGkrKykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHByb2plY3REZXRhaWxzID0gYXdhaXQgbWlsZXN0b25lRnVuZGluZy5tZXRob2RzLmdldFByb2plY3REZXRhaWxzKGkpLmNhbGwoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBIYW5kbGUgdGhlIHRvdGFsIGRvbmF0aW9ucyBhbW91bnQgc2FmZWx5XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGlmICh0b3RhbERvbmF0aW9uc0JOKSB7XHJcbiAgICAgICAgICAgIC8vIFVzZSBCTiBhZGRpdGlvbiBpZiBhdmFpbGFibGVcclxuICAgICAgICAgICAgdG90YWxEb25hdGlvbnNCTiA9IHRvdGFsRG9uYXRpb25zQk4uYWRkKHdlYjMudXRpbHMudG9CTihwcm9qZWN0RGV0YWlscy50b3RhbEZ1bmRpbmcpKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIHNpbXBsZSBzdHJpbmcvbnVtYmVyIGhhbmRsaW5nXHJcbiAgICAgICAgICAgIGNvbnN0IGZ1bmRpbmdJbkV0aGVyID0gd2ViMyAmJiB3ZWIzLnV0aWxzIFxyXG4gICAgICAgICAgICAgID8gd2ViMy51dGlscy5mcm9tV2VpKHByb2plY3REZXRhaWxzLnRvdGFsRnVuZGluZywgJ2V0aGVyJylcclxuICAgICAgICAgICAgICA6IHBhcnNlRmxvYXQocHJvamVjdERldGFpbHMudG90YWxGdW5kaW5nKSAvIDFlMTg7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0b3RhbERvbmF0aW9ucyA9IChwYXJzZUZsb2F0KHRvdGFsRG9uYXRpb25zKSArIHBhcnNlRmxvYXQoZnVuZGluZ0luRXRoZXIpKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGJuRXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhZGRpbmcgdG8gZG9uYXRpb24gdG90YWw6XCIsIGJuRXJyb3IpO1xyXG4gICAgICAgICAgLy8gRmFsbGJhY2sgdG8gc2ltcGxlIGFkZGl0aW9uXHJcbiAgICAgICAgICB0b3RhbERvbmF0aW9ucyA9IChwYXJzZUZsb2F0KHRvdGFsRG9uYXRpb25zKSArIHBhcnNlRmxvYXQocHJvamVjdERldGFpbHMudG90YWxGdW5kaW5nKSAvIDFlMTgpLnRvRml4ZWQoNCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChwcm9qZWN0RGV0YWlscy5pc0FjdGl2ZSkge1xyXG4gICAgICAgICAgYWN0aXZlQ2FtcGFpZ25zKys7XHJcbiAgICAgICAgICAvLyBJbiBhIHJlYWwgc2NlbmFyaW8sIHlvdSdkIGhhdmUgYSB3YXkgdG8gdHJhY2sgcGVvcGxlIGhlbHBlZCBwZXIgcHJvamVjdFxyXG4gICAgICAgICAgLy8gRm9yIG5vdywgdXNlIGEgZm9ybXVsYSBiYXNlZCBvbiBwcm9qZWN0IGZ1bmRpbmcgYW5kIG1pbGVzdG9uZXNcclxuICAgICAgICAgIGNvbnN0IHRvdGFsRnVuZGluZ0V0aCA9IHdlYjMgJiYgd2ViMy51dGlsc1xyXG4gICAgICAgICAgICA/IHBhcnNlRmxvYXQod2ViMy51dGlscy5mcm9tV2VpKHByb2plY3REZXRhaWxzLnRvdGFsRnVuZGluZywgJ2V0aGVyJykpXHJcbiAgICAgICAgICAgIDogcGFyc2VGbG9hdChwcm9qZWN0RGV0YWlscy50b3RhbEZ1bmRpbmcpIC8gMWUxODtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICBjb25zdCBwZW9wbGVIZWxwZWRFc3RpbWF0ZSA9IE1hdGguZmxvb3IodG90YWxGdW5kaW5nRXRoICogMTUwKTtcclxuICAgICAgICAgIHRvdGFsUGVvcGxlSGVscGVkICs9IHBlb3BsZUhlbHBlZEVzdGltYXRlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBnZXR0aW5nIGRldGFpbHMgZm9yIHByb2plY3QgJHtpfTpgLCBlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gRm9ybWF0IHRoZSBmaW5hbCB0b3RhbERvbmF0aW9ucyB2YWx1ZVxyXG4gICAgbGV0IGZvcm1hdHRlZERvbmF0aW9ucztcclxuICAgIFxyXG4gICAgaWYgKHRvdGFsRG9uYXRpb25zQk4pIHtcclxuICAgICAgZm9ybWF0dGVkRG9uYXRpb25zID0gd2ViMy51dGlscy5mcm9tV2VpKHRvdGFsRG9uYXRpb25zQk4sICdldGhlcicpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gSWYgd2UndmUgYmVlbiB0cmFja2luZyBpbiBldGhlciBhbHJlYWR5LCB1c2UgdGhhdCB2YWx1ZVxyXG4gICAgICBmb3JtYXR0ZWREb25hdGlvbnMgPSB0b3RhbERvbmF0aW9ucztcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdG90YWxEb25hdGlvbnM6IGZvcm1hdHRlZERvbmF0aW9ucyxcclxuICAgICAgYWN0aXZlQ2FtcGFpZ25zLFxyXG4gICAgICBwZW9wbGVIZWxwZWQ6IHRvdGFsUGVvcGxlSGVscGVkLFxyXG4gICAgICB2ZXJpZmllZE5HT3M6IHBhcnNlSW50KHZlcmlmaWVkTkdPc0NvdW50KVxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdldHRpbmcgZGFzaGJvYXJkIHN0YXRzOlwiLCBlcnJvcik7XHJcbiAgICAvLyBJbiBjYXNlIG9mIGVycm9yLCByZXR1cm4gZGVtbyBkYXRhIGFzIGZhbGxiYWNrXHJcbiAgICByZXR1cm4gZGVtb0RhdGEuZ2V0RGVtb1N0YXRzKCk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9ucyBmb3IgZ2VuZXJhdGluZyB0ZXN0IGRhdGFcclxuZnVuY3Rpb24gZ2V0UmFuZG9tRGlzYXN0ZXJUeXBlKHNlZWQpIHtcclxuICBjb25zdCB0eXBlcyA9IE9iamVjdC52YWx1ZXMoRElTQVNURVJfVFlQRVMpO1xyXG4gIHJldHVybiB0eXBlc1tzZWVkICUgdHlwZXMubGVuZ3RoXTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0TG9jYXRpb25Gb3JEaXNhc3RlclR5cGUoZGlzYXN0ZXJUeXBlKSB7XHJcbiAgY29uc3QgbG9jYXRpb25zID0ge1xyXG4gICAgW0RJU0FTVEVSX1RZUEVTLkVBUlRIUVVBS0VdOiBcIlBvcnQtYXUtUHJpbmNlLCBIYWl0aVwiLFxyXG4gICAgW0RJU0FTVEVSX1RZUEVTLkhVUlJJQ0FORV06IFwiTmV3IE9ybGVhbnMsIFVTQVwiLFxyXG4gICAgW0RJU0FTVEVSX1RZUEVTLkZMT09EXTogXCJLZXJhbGEsIEluZGlhXCIsXHJcbiAgICBbRElTQVNURVJfVFlQRVMuV0lMREZJUkVdOiBcIkNhbGlmb3JuaWEsIFVTQVwiLFxyXG4gICAgW0RJU0FTVEVSX1RZUEVTLkRST1VHSFRdOiBcIk5haXJvYmksIEtlbnlhXCIsXHJcbiAgICBbRElTQVNURVJfVFlQRVMuVFNVTkFNSV06IFwiUGh1a2V0LCBUaGFpbGFuZFwiLFxyXG4gICAgW0RJU0FTVEVSX1RZUEVTLlZPTENBTklDX0VSVVBUSU9OXTogXCJCYWxpLCBJbmRvbmVzaWFcIixcclxuICAgIFtESVNBU1RFUl9UWVBFUy5QQU5ERU1JQ106IFwiR2xvYmFsIFJlc3BvbnNlXCIsXHJcbiAgICBbRElTQVNURVJfVFlQRVMuT1RIRVJdOiBcIk11bHRpcGxlIFJlZ2lvbnNcIlxyXG4gIH07XHJcbiAgXHJcbiAgcmV0dXJuIGxvY2F0aW9uc1tkaXNhc3RlclR5cGVdIHx8IFwiVW5rbm93biBMb2NhdGlvblwiO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRVcmdlbmN5Rm9yRGlzYXN0ZXJUeXBlKGRpc2FzdGVyVHlwZSkge1xyXG4gIGNvbnN0IHVyZ2VuY2llcyA9IHtcclxuICAgIFtESVNBU1RFUl9UWVBFUy5FQVJUSFFVQUtFXTogNSxcclxuICAgIFtESVNBU1RFUl9UWVBFUy5IVVJSSUNBTkVdOiA0LFxyXG4gICAgW0RJU0FTVEVSX1RZUEVTLkZMT09EXTogNCxcclxuICAgIFtESVNBU1RFUl9UWVBFUy5XSUxERklSRV06IDMsXHJcbiAgICBbRElTQVNURVJfVFlQRVMuRFJPVUdIVF06IDIsXHJcbiAgICBbRElTQVNURVJfVFlQRVMuVFNVTkFNSV06IDUsXHJcbiAgICBbRElTQVNURVJfVFlQRVMuVk9MQ0FOSUNfRVJVUFRJT05dOiAzLFxyXG4gICAgW0RJU0FTVEVSX1RZUEVTLlBBTkRFTUlDXTogNCxcclxuICAgIFtESVNBU1RFUl9UWVBFUy5PVEhFUl06IDNcclxuICB9O1xyXG4gIFxyXG4gIHJldHVybiB1cmdlbmNpZXNbZGlzYXN0ZXJUeXBlXSB8fCAzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjYWxjdWxhdGVEZWFkbGluZShwcm9qZWN0SWQpIHtcclxuICAvLyBDcmVhdGUgZGV0ZXJtaW5pc3RpYyBidXQgdmFyaWVkIGRlYWRsaW5lc1xyXG4gIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApO1xyXG4gIGNvbnN0IGRheXNGcm9tTm93ID0gMTAgKyAocHJvamVjdElkICogNSkgJSA2MDsgLy8gQmV0d2VlbiAxMCBhbmQgNzAgZGF5c1xyXG4gIHJldHVybiBub3cgKyAoZGF5c0Zyb21Ob3cgKiAyNCAqIDYwICogNjApO1xyXG59XHJcblxyXG4vLyBDaGVjayBpZiBhbiBOR08gaXMgdmVyaWZpZWRcclxuZXhwb3J0IGNvbnN0IGlzTkdPVmVyaWZpZWQgPSBhc3luYyAobmdvQWRkcmVzcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBpbml0V2ViMygpO1xyXG4gICAgY29uc3QgaXNWZXJpZmllZCA9IGF3YWl0IG5nb1JlZ2lzdHJ5Lm1ldGhvZHMuaXNWZXJpZmllZChuZ29BZGRyZXNzKS5jYWxsKCk7XHJcbiAgICByZXR1cm4gaXNWZXJpZmllZDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNoZWNraW5nIGlmIE5HTyBpcyB2ZXJpZmllZDpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFZlcmlmeSBkb2N1bWVudCBvbiBJUEZTXHJcbmV4cG9ydCBjb25zdCB2ZXJpZnlJUEZTRG9jdW1lbnQgPSBhc3luYyAoY2lkKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgYWNjb3VudHMgfSA9IGF3YWl0IGluaXRXZWIzKCk7XHJcbiAgICBhd2FpdCBpcGZzVmVyaWZpZXIubWV0aG9kcy52ZXJpZnlEb2N1bWVudChjaWQpLnNlbmQoeyBmcm9tOiBhY2NvdW50c1swXSB9KTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdmVyaWZ5aW5nIElQRlMgZG9jdW1lbnQ6XCIsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEdldCBjb250cmFjdCBhZGRyZXNzZXMgZm9yIGZyb250ZW5kIGRpc3BsYXlcclxuZXhwb3J0IGNvbnN0IGdldENvbnRyYWN0QWRkcmVzc2VzID0gKCkgPT4ge1xyXG4gIHJldHVybiBDT05UUkFDVF9BRERSRVNTRVM7XHJcbn07XHJcblxyXG4vLyBDaGVjayBpZiB3YWxsZXQgd2FzIHByZXZpb3VzbHkgY29ubmVjdGVkXHJcbmV4cG9ydCBjb25zdCBjaGVja1ByZXZpb3VzQ29ubmVjdGlvbiA9IGFzeW5jICgpID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gQ2hlY2sgbG9jYWxTdG9yYWdlIGZvciBwcmV2aW91cyBjb25uZWN0aW9uXHJcbiAgICBjb25zdCB3YXNDb25uZWN0ZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnd2FsbGV0Q29ubmVjdGVkJykgPT09ICd0cnVlJztcclxuICAgIFxyXG4gICAgaWYgKHdhc0Nvbm5lY3RlZCkge1xyXG4gICAgICAvLyBUcnkgdG8gcmVjb25uZWN0IHNpbGVudGx5XHJcbiAgICAgIGNvbnN0IHsgY29ubmVjdGVkLCBhY2NvdW50cyB9ID0gYXdhaXQgaW5pdFdlYjMoZmFsc2UpO1xyXG4gICAgICBcclxuICAgICAgaWYgKGNvbm5lY3RlZCkge1xyXG4gICAgICAgIHJldHVybiB7IGNvbm5lY3RlZCwgYWRkcmVzczogYWNjb3VudHNbMF0gfTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4geyBjb25uZWN0ZWQ6IGZhbHNlIH07XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgY29uc29sZS53YXJuKCdFcnJvciBjaGVja2luZyBwcmV2aW91cyBjb25uZWN0aW9uOicsIGUpO1xyXG4gICAgcmV0dXJuIHsgY29ubmVjdGVkOiBmYWxzZSB9O1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEFkZCB0aGUgbWlzc2luZyBnZXRDdXJyZW50QWNjb3VudCBmdW5jdGlvblxyXG5leHBvcnQgY29uc3QgZ2V0Q3VycmVudEFjY291bnQgPSBhc3luYyAoKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgd2ViMywgYWNjb3VudHMgfSA9IGF3YWl0IGluaXRXZWIzKGZhbHNlKTtcclxuICAgIGlmIChhY2NvdW50cyAmJiBhY2NvdW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHJldHVybiBhY2NvdW50c1swXTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBjdXJyZW50IGFjY291bnQ6XCIsIGVycm9yKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBpbml0V2ViMyxcclxuICBnZXRSZWxpZWZDYW1wYWlnbnMsXHJcbiAgZ2V0UmVsaWVmQ2FtcGFpZ24sXHJcbiAgZ2V0TWlsZXN0b25lcyxcclxuICBkb25hdGUsXHJcbiAgZ2V0VmVyaWZpY2F0aW9uU3RhdHVzLFxyXG4gIGdldE5HT0RldGFpbHMsXHJcbiAgZ2V0RGFzaGJvYXJkU3RhdHMsXHJcbiAgaXNOR09WZXJpZmllZCxcclxuICB2ZXJpZnlJUEZTRG9jdW1lbnQsXHJcbiAgZ2V0Q29udHJhY3RBZGRyZXNzZXMsXHJcbiAgRElTQVNURVJfVFlQRVMsXHJcbiAgVVJHRU5DWV9MRVZFTFMsXHJcbiAgY2hlY2tXZWIzQ29ubmVjdGlvbixcclxuICBjb25uZWN0V2FsbGV0LFxyXG4gIGdldEN1cnJlbnRBY2NvdW50ICAgLy8gQWRkIHRoaXMgdG8gdGhlIGV4cG9ydHNcclxufTtcclxuIl0sIm5hbWVzIjpbIldlYjMiLCJEM1JQcm90b2NvbEFCSSIsIk1pbGVzdG9uZUZ1bmRpbmdBQkkiLCJOR09SZWdpc3RyeUFCSSIsIkNoYWlubGlua0Rpc2FzdGVyT3JhY2xlQUJJIiwiSVBGU1ZlcmlmaWVyQUJJIiwiRnVuZFBvb2xBQkkiLCJEb25hdGlvblRyYWNrZXJBQkkiLCJESVNBU1RFUl9UWVBFUyIsIlVSR0VOQ1lfTEVWRUxTIiwiQ09OVFJBQ1RfQUREUkVTU0VTIiwiZGVtb0RhdGEiLCJ3ZWIzIiwiZDNyUHJvdG9jb2wiLCJtaWxlc3RvbmVGdW5kaW5nIiwibmdvUmVnaXN0cnkiLCJkaXNhc3Rlck9yYWNsZSIsImlwZnNWZXJpZmllciIsImZ1bmRQb29sIiwiZG9uYXRpb25UcmFja2VyIiwiRDNSX1BST1RPQ09MX0FERFJFU1MiLCJEM1JfUFJPVE9DT0wiLCJNSUxFU1RPTkVfRlVORElOR19BRERSRVNTIiwiTUlMRVNUT05FX0ZVTkRJTkciLCJOR09fUkVHSVNUUllfQUREUkVTUyIsIk5HT19SRUdJU1RSWSIsIkRJU0FTVEVSX09SQUNMRV9BRERSRVNTIiwiRElTQVNURVJfT1JBQ0xFIiwiSVBGU19WRVJJRklFUl9BRERSRVNTIiwiSVBGU19WRVJJRklFUiIsIkZVTkRfUE9PTF9BRERSRVNTIiwiRlVORF9QT09MIiwiRE9OQVRJT05fVFJBQ0tFUl9BRERSRVNTIiwiRE9OQVRJT05fVFJBQ0tFUiIsImluaXRXZWIzIiwiZm9yY2VDb25uZWN0IiwiYWNjb3VudHMiLCJ3aW5kb3ciLCJldGhlcmV1bSIsImNvbnNvbGUiLCJsb2ciLCJyZXF1ZXN0IiwibWV0aG9kIiwiX2V2ZW50cyIsImFjY291bnRzQ2hhbmdlZCIsIm9uIiwibmV3QWNjb3VudHMiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJjaGFpbklkIiwiZXJyb3IiLCJjdXJyZW50UHJvdmlkZXIiLCJldGgiLCJnZXRBY2NvdW50cyIsInByb3ZpZGVyIiwicHJvdmlkZXJzIiwiSHR0cFByb3ZpZGVyIiwiQ29udHJhY3QiLCJhYmkiLCJjb250cmFjdEVycm9yIiwiY29ubmVjdGVkIiwibGVuZ3RoIiwiY2hlY2tXZWIzQ29ubmVjdGlvbiIsIm5ldHdvcmtJZCIsIm5ldCIsImdldElkIiwibmV0d29ya1R5cGUiLCJnZXROZXR3b3JrVHlwZSIsIm1lc3NhZ2UiLCJjb25uZWN0V2FsbGV0IiwicmVzdWx0Iiwic3VjY2VzcyIsImV4cGVjdGVkTmV0d29yayIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19ORVRXT1JLX0lEIiwibmV0d29ya05hbWUiLCJORVhUX1BVQkxJQ19ORVRXT1JLX05BTUUiLCJ0b1N0cmluZyIsInBhcmFtcyIsInBhcnNlSW50Iiwic3dpdGNoRXJyb3IiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiZSIsIndhcm4iLCJhZGRyZXNzIiwiZ2V0UmVsaWVmQ2FtcGFpZ25zIiwiZmlsdGVycyIsImlzRGVtb01vZGUiLCJnZXRJdGVtIiwiZ2V0RGVtb0NhbXBhaWducyIsInByb2plY3RDb3VudCIsIm1ldGhvZHMiLCJjYWxsIiwiY2FtcGFpZ25zIiwiaSIsInByb2plY3REZXRhaWxzIiwiZ2V0UHJvamVjdERldGFpbHMiLCJpc0FjdGl2ZSIsIm1ldGFkYXRhIiwiZGlzYXN0ZXJUeXBlIiwiZ2V0UmFuZG9tRGlzYXN0ZXJUeXBlIiwiZGlzYXN0ZXJJZCIsImxvY2F0aW9uIiwiZ2V0TG9jYXRpb25Gb3JEaXNhc3RlclR5cGUiLCJ1cmdlbmN5TGV2ZWwiLCJnZXRVcmdlbmN5Rm9yRGlzYXN0ZXJUeXBlIiwidmVyaWZpY2F0aW9uIiwiZ2V0RGlzYXN0ZXJWZXJpZmljYXRpb24iLCJ2ZXJpZmllZCIsImNvbmZpZGVuY2UiLCJzb3VyY2UiLCJ2ZXJpZmljYXRpb25FcnJvciIsIm1ldGFkYXRhRXJyb3IiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwidXJnZW5jeSIsIm1pbGVzdG9uZXMiLCJqIiwibWlsZXN0b25lQ291bnQiLCJtaWxlc3RvbmUiLCJnZXRNaWxlc3RvbmVEZXRhaWxzIiwicHVzaCIsImlkIiwibWlsZXN0b25lRXJyb3IiLCJuZ29EZXRhaWxzIiwibmFtZSIsImdldE5HT0RldGFpbHMiLCJuZ29BZGRyZXNzIiwibmdvRXJyb3IiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiY3JlYXRvciIsIm5nb05hbWUiLCJjdXJyZW50QW1vdW50IiwicmVsZWFzZWRGdW5kaW5nIiwidGFyZ2V0QW1vdW50IiwidG90YWxGdW5kaW5nIiwibWlsZXN0b25lc0NvbXBsZXRlZCIsImRlYWRsaW5lIiwiY2FsY3VsYXRlRGVhZGxpbmUiLCJwYXJzZWRNZXRhZGF0YSIsInByb2plY3RFcnJvciIsImdldFJlbGllZkNhbXBhaWduIiwiZ2V0RGVtb0NhbXBhaWduIiwiZmluZCIsImMiLCJnZXRNaWxlc3RvbmVzIiwiY2FtcGFpZ25JZCIsImdldERlbW9NaWxlc3RvbmVzIiwiY2FtcGFpZ24iLCJkb25hdGUiLCJhbW91bnQiLCJFcnJvciIsImFtb3VudFdlaSIsInV0aWxzIiwidG9XZWkiLCJkb25hdGVUb1Byb2plY3QiLCJzZW5kIiwiZnJvbSIsInZhbHVlIiwicHJvdG9jb2xFcnJvciIsInNlbmRUcmFuc2FjdGlvbiIsInRvIiwiZGF0YSIsImVuY29kZUZ1bmN0aW9uQ2FsbCIsInR5cGUiLCJpbnB1dHMiLCJnZXRWZXJpZmljYXRpb25TdGF0dXMiLCJnZXREZW1vVmVyaWZpY2F0aW9uIiwiZ2V0RGVtb05HTyIsImdldERhc2hib2FyZFN0YXRzIiwiZ2V0RGVtb1N0YXRzIiwidmVyaWZpZWROR09zQ291bnQiLCJnZXRWZXJpZmllZE5HT3NDb3VudCIsInRvdGFsRG9uYXRpb25zIiwidG90YWxEb25hdGlvbnNCTiIsInRvQk4iLCJhY3RpdmVDYW1wYWlnbnMiLCJ0b3RhbFBlb3BsZUhlbHBlZCIsImFkZCIsImZ1bmRpbmdJbkV0aGVyIiwiZnJvbVdlaSIsInBhcnNlRmxvYXQiLCJibkVycm9yIiwidG9GaXhlZCIsInRvdGFsRnVuZGluZ0V0aCIsInBlb3BsZUhlbHBlZEVzdGltYXRlIiwiTWF0aCIsImZsb29yIiwiZm9ybWF0dGVkRG9uYXRpb25zIiwicGVvcGxlSGVscGVkIiwidmVyaWZpZWROR09zIiwic2VlZCIsInR5cGVzIiwiT2JqZWN0IiwidmFsdWVzIiwibG9jYXRpb25zIiwiRUFSVEhRVUFLRSIsIkhVUlJJQ0FORSIsIkZMT09EIiwiV0lMREZJUkUiLCJEUk9VR0hUIiwiVFNVTkFNSSIsIlZPTENBTklDX0VSVVBUSU9OIiwiUEFOREVNSUMiLCJPVEhFUiIsInVyZ2VuY2llcyIsInByb2plY3RJZCIsIm5vdyIsIkRhdGUiLCJkYXlzRnJvbU5vdyIsImlzTkdPVmVyaWZpZWQiLCJpc1ZlcmlmaWVkIiwidmVyaWZ5SVBGU0RvY3VtZW50IiwiY2lkIiwidmVyaWZ5RG9jdW1lbnQiLCJnZXRDb250cmFjdEFkZHJlc3NlcyIsImNoZWNrUHJldmlvdXNDb25uZWN0aW9uIiwid2FzQ29ubmVjdGVkIiwiZ2V0Q3VycmVudEFjY291bnQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-browser)/./utils/web3.js\n"));

/***/ })

});